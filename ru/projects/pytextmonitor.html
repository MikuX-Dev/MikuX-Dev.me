---
category: ru
layout: project
title: py-text-monitor
short: pytextmonitor
description: Минималистичный плазмоид, который выглядит, как виджеты в Awesome WM
hasgui: true
developers:
    - Evgeniy Alelseev
license: GPL
links:
    - Страница плазмоида на <a href="http://kde-look.org/content/show.php/Py+Text+Monitor?content=157124">kde-look.org</a>
    - Страница DataEngine на <a href="http://kde-look.org/content/show.php/Extended+Systemmonitor+DataEngine?content=158773">kde-look.org</a>
    - Пакет в <a href="https://aur.archlinux.org/packages/kdeplasma-applets-pytextmonitor">AUR</a>
---
<!-- info block -->
<h2><a name="info" class="anchor" href="#information"><span class="octicon octicon-link"></span></a>Информация</h2>
<p align="justify">Минималистичный пламоид, написанный на <code>Python2</code>. Он выглядит, как виджеты в <a href="http://awesome.naquadah.org/">Awesome WM</a>. Мой плазмоид хорошо и легко настраивается и не засоряет Ваш KDE. Также данный пакет имеет дополнительный <a href="http://techbase.kde.org/Development/Tutorials/Plasma/DataEngines">DataEngine</a>, который написан на <code>CPP</code> (старые версии были написаны на <code>Python2</code>).</p>

<h3><a name="devel" class="anchor" href="#devel"><span class="octicon octicon-link"></span></a>Разработчики</h3>
<ul>
  {% for devel in page.developers %}
    <li>{{ devel }}</li>
  {% endfor %}
</ul>

<h3><a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>Лицензия</h3>
<ul>
  <li>{{ page.license }}</li>
</ul>
<!-- end of info block -->

<!-- install block -->
<h2><a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>Установка</h2>

<h3><a name="instruction" class="anchor" href="#instruction"><span class="octicon octicon-link"></span></a>Инструкция</h3>
<ul>
  <li><p align="justify">Скачайте <a href="https://github.com/arcan1s/pytextmonitor/releases">архив</a> с актуальной версией исходных файлов.</p></li>
  <li><p align="justify">Извлеките из него файлы и установите DataEngine:</p>
{% highlight bash %}
cd /путь/к/извлеченным/файлам/
mkdir build && cd build
cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --localprefix` -DCMAKE_BUILD_TYPE=Release ../
make
make install
{% endhighlight %}
<p align="justify">Для глобальной установки наберите:</p>
{% highlight bash %}
cd /путь/к/извлеченным/файлам/
mkdir build && cd build
cmake -DCMAKE_INSTALL_PREFIX=`kde4-config --prefix` -DCMAKE_BUILD_TYPE=Release ../
make
sudo make install
{% endhighlight %}</li>
  <li><p align="justify">Установите плазмоид:</p>
{% highlight bash %}
plasmapkg -i py-text-monitor-1.5.0.plasmoid
{% endhighlight %}
<p align="justify">Для глобальной установки наберите:</p>
{% highlight bash %}
sudo plasmapkg -g -i py-text-monitor-1.5.0.plasmoid
{% endhighlight %}</li>
</ul>

<h3><a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Зависимости</h3>
<p align="justify">Все было протестировано на последних версиях зависимостей.</p>
<ul>
  <li>kdebase-workspace</li>
  <li>kdebindings-python2</li>
  <li>automoc4 <i>(make)</i></li>
  <li>cmake <i>(make)</i></li>
  <li>kdebase-runtime <i>(make)</i></li>
  <li>lm_sensors <i>(опционально, для определения температурного устройства)</i></li>
  <li>net-tools <i>(опционально, для определения интернет устройства)</i></li>
  <li>sysstat <i>(опционально, для уведомлений)</i></li>
  <li>hddtemp <i>(опционально, для контроля за температурой HDD)</i></li>
  <li>один из поддерживаемых музыкальных плееров - <a href="http://amarok.kde.org/">amarok</a>, <a href="http://www.musicpd.org/">mtd</a> или <a href="http://qmmp.ylsoftware.com/">qmmp</a> <i>(опционально, для контроля за музыкальным плеером)</i>
  <li>проприетарный видеодрайвер <i>(опционально, для контроля за GPU)</i></li></li>
</ul>
<!-- end of install block -->

<!-- howto block -->
<h2><a name="howto" class="anchor" href="#howto"><span class="octicon octicon-link"></span></a>Использование</h2>
<p align="justify">Откройте список виджетов Plasma и выберете <code>Py Text Monitor</code>.</p>
<!-- end of howto block -->

<!-- config block -->
<h2><a name="config" class="anchor" href="#config"><span class="octicon octicon-link"></span></a>Настройка</h2>

<h3><a name="deconf" class="anchor" href="#deconf"><span class="octicon octicon-link"></span></a>Настройка DataEngine</h3>
<p align="justify">Вы можете отредактировать настройки DataEngine, которые хранятся в <code>/usr/share/config/extsysmon.conf</code> или <code>$HOME/.kde4/share/config/extsysmon.conf</code> в зависимости от типа установки. Раскомментируйте необходимые строчки и отредактируйте их.</p>

<h4><a name="deoptions" class="anchor" href="#deoptions"><span class="octicon octicon-link"></span></a>Опции DataEngine</h4>
<table>
  <tr>
    <th>GPUDEV</th>
    <td><p align="justify">Устанавливает тип GPU. Может быть <code>nvidia</code> (для nVidia), <code>ati</code> (для ATI Radeon), <code>ignore</code> или <code>auto</code>. По умолчанию <code>auto</code>.</p></td>
  </tr>
  <tr>
    <th>HDDDEV</th>
    <td><p align="justify">Устанавливает блочное устройство для <code>hddtemp</code> через запятую или <code>all</code> для всех возможных. По умолчанию <code>all</code>.</p></td>
  </tr>
  <tr>
    <th>MPDADDRESS</th>
    <td><p align="justify">Адрес MPD хоста. По умолчанию <code>localhost</code>.</td>
  </tr>
  <tr>
    <th>MPDPORT</th>
    <td><p align="justify">Адрес MPD хоста. По умолчанию <code>6600</code>.</td>
  </tr>
</table>

<h3><a name="widconf" class="anchor" href="#widconf"><span class="octicon octicon-link"></span></a>Настройка виджета</h3>
<p align="justify">Для настройки внешнего вида Вы должны открыть окно настроек и установить требуемый формат. Порядок меток изменится, если Вы измените положение слайдера. В метках работают HTML тэги.<br>
<b>ЗАМЕЧАНИЕ</b> Вы не можете, например, заставить его показывать Вам <code>$cpu</code> в метка swap. <b><code>$cpu</code> будет работать только в метке cpu.</b></p>
<p align="justify">Доступные флаги в таблице ниже.</p>
<table>
  <tr>
    <th rowspan="4">Время</th>
    <td><code>$time</code></td>
    <td><p align="justify">Время в стандартном формате. Например, <code>fri Nov 6 04:48:01 2013</code>.</p></td>
  </tr>
  <tr>
    <td><code>$isotime</code></td>
    <td><p align="justify">Время в формате ISO.</p></td>
  </tr>
  <tr>
    <td><code>$shorttime</code></td>
    <td><p align="justify">Время в коротком формате локали.</p></td>
  </tr>
  <tr>
    <td><code>$longtime</code></td>
    <td><p align="justify">Время в длинном формате локали.</p></td>
  </tr>
  <tr>
    <th rowspan="1">Аптайм</th>
    <td><code>$uptime</code></td>
    <td><p align="justify">Системный аптайм, <code>---d--h--m</code>.</p></td>
  </tr>
  <tr>
    <th rowspan="2">CPU</th>
    <td><code>$cpu</code></td>
    <td><p align="justify">Полная загрузка CPU, %, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <td><code>$ccpu</code></td>
    <td><p align="justify">Загрузка CPU для каждого ядра, %, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <th rowspan="2">Частота CPU</th>
    <td><code>$cpucl</code></td>
    <td><p align="justify">Средняя частота CPU, МГц, <code>----</code>.</p></td>
  </tr>
  <tr>
    <td><code>$ccpucl</code></td>
    <td><p align="justify">Частота CPU для каждого ядра, МГц, <code>----</code>.</p></td>
  </tr>
  <tr>
    <th rowspan="1">Температура</th>
    <td><code>$temp</code></td>
    <td><p align="justify">Средняя температура в системе, &deg;C, <code>----</code>. Устройство должно быть указано.</p></td>
  </tr>
  <tr>
    <th rowspan="1">GPU</th>
    <td><code>$gpu</code></td>
    <td><p align="justify">Использование GPU, %, <code>-----</code>. <code>aticonfig</code> или <code>nvidia-smi</code> должны быть установлены.</p></td>
  </tr>
  <tr>
    <th rowspan="1">Температура GPU</th>
    <td><code>$gputemp</code></td>
    <td><p align="justify">Температура GPU, &deg;C, <code>----</code>. <code>aticonfig</code> или <code>nvidia-smi</code> должны быть установлены.</p></td>
  </tr>
  <tr>
    <th rowspan="2">Память</th>
    <td><code>$mem</code></td>
    <td><p align="justify">Использование памяти, %, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <td><code>$memmb</code></td>
    <td><p align="justify">Использование памяти, MB, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <th rowspan="2">Swap</th>
    <td><code>$swap</code></td>
    <td><p align="justify">Использование swap, %, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <td><code>$swapmb</code></td>
    <td><p align="justify">Использование swap, MB, <code>-----</code>.</p></td>
  </tr>
  <tr>
    <th rowspan="1">HDD</th>
    <td><code>@@/@@</code></td>
    <td><p align="justify">Занятость точки монтирования (<code>/</code> в примере), %, <code>-----</code>. Разделитель <code>;</code>, например <code>@@/;/home;/mnt/global@@</code></p></td>
  </tr>
  <tr>
    <th rowspan="1">Температура HDD</th>
    <td><code>@@/dev/sda@@</code></td>
    <td><p align="justify">Температура HDD (<code>/dev/sda</code> в примере), &deg;C, <code>----</code>. <code>hddtemp</code> должен быть установлен.</p></td>
  </tr>
  <tr>
    <th rowspan="3">Сеть</th>
    <td><code>$net</code></td>
    <td><p align="justify">Скорость загрузки и отдачи, KB/s, <code>----/----</code>.</p></td>
  </tr>
  <tr>
    <td><code>@@eth0@@</code></td>
    <td><p align="justify">Не использовать автоматическое определение устройства, показывать только данные по указанному устройству (<code>eth0</code> в примере).</p></td>
  </tr>
  <tr>
    <td><code>$netdev</code></td>
    <td><p align="justify">Текущее устройство.</p></td>
  </tr>
  <tr>
    <th rowspan="2">Батарея</th>
    <td><code>$bat</code></td>
    <td><p align="justify">Заряд батареи, %, <code>---</code>. Устройство может быть указано ниже. Файл (<code>/sys/class/power_supply/BAT0/capacity</code> по умолчанию) должен содержать только заряд батареи в %.</p></td>
  </tr>
  <tr>
    <td><code>$ac</code></td>
    <td><p align="justify">Статус зарядного устройства. Возвращает <code>(*)</code>, если устройство подключено, или <code>( )</code>, если нет. Устройство может быть указано ниже. Файл (<code>/sys/class/power_supply/AC/online</code> по умолчанию) должен содержать <code>1</code>, если устройство подключено.</p></td>
  </tr>
  <tr>
    <th rowspan="5">Музыкальный плеер</th>
    <td><code>$artist</code></td>
    <td><p align="justify">Исполнитель текущей песни. Один из поддерживаемых музыкальных плееров должен быть установлен.</p></td>
  </tr>
  <tr>
    <td><code>$album</code></td>
    <td><p align="justify">Альбом текущей песни. Один из поддерживаемых музыкальных плееров должен быть установлен.</p></td>
  </tr>
  <tr>
    <td><code>$progress</code></td>
    <td><p align="justify">Прогресс текущей песни. Один из поддерживаемых музыкальных плееров должен быть установлен (mpd в настоящий момент не поддерживается).</p></td>
  </tr>
  <tr>
    <td><code>$time</code></td>
    <td><p align="justify">Длительность текущей пени. Один из поддерживаемых музыкальных плееров должен быть установлен.</p></td>
  </tr>
  <tr>
    <td><code>$title</code></td>
    <td><p align="justify">Название текущей песни. Один из поддерживаемых музыкальных плееров должен быть установлен.</p></td>
  </tr>
</table>
<!-- end of config block -->

<!-- gui block -->
<h2><a name="gui" class="anchor" href="#gui"><span class="octicon octicon-link"></span></a>Графический интерфейс</h2>

<h2><a name="screenshots" class="anchor" href="#screenshots"><span class="octicon octicon-link"></span></a>Скриншоты</h2>
<p align="justify">Виджет (кликабельно):<br>
<a href="/resources/screenshots/pytextmonitor_widget.png"><img src="/resources/preview/pytextmonitor_widget_prev.jpg"></a><br>
Окно настроек:<br>
<a href="/resources/screenshots/pytextmonitor_config.png"><img src="/resources/preview/pytextmonitor_config_prev.jpg"></a></p>
