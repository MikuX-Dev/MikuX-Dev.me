---
category: ru
hastr: true
layout: project
title: git-etc
short: git-etc
tags: git, python, qt, linux, system, демон
hasgui: true
hasdocs: false
developers:
    - Evgeniy Alekseev
license: GPLv3
links:
    - Пакет в <a href="//aur.archlinux.org/packages/git-etc" title="AUR">AUR</a>
---
<!-- info block -->
<h2><a href="#info" class="anchor" id="info"><span class="octicon octicon-link"></span></a>Информация</h2>
<p>Простой демон, который создает git репозиторий в указанной директории и создает коммит в указанный промежуток времени.</p>

{% highlight bash %}
$ git-etc --help
Simple daemon written on BASH for monitoring changes in files

Usage: git-etc [ -c | --config /etc/git-etc.conf ] [ -h | --help ] [ -v | --version ]

Parametrs:
  -c  --config      - path to configuration file
  -h  --help        - show this help and exit
  -v  --version     - show version and exit

See "man 1 git-etc" for more details
{% endhighlight %}

{% highlight bash %}
$ ctrlconf --help
GUI for git-etc daemon

Usage: ctrlconf [ --default ] [ -h | --help ] [ -v | --version ]

Additional parametrs:
      --default     - create default configuration file
  -h  --help        - show this help and exit
  -v  --version     - show version and exit

See "man 1 ctrlconf" for more details
{% endhighlight %}

<h3><a href="#devel" class="anchor" id="devel"><span class="octicon octicon-link"></span></a>Разработчики</h3>
<ul>
  {% for devel in page.developers %}
    <li>{{ devel }}</li>
  {% endfor %}
</ul>

<h3><a href="#license" class="anchor" id="license"><span class="octicon octicon-link"></span></a>Лицензия</h3>
<ul>
  <li>{{ page.license }}</li>
</ul>
<!-- end of info block -->

<!-- install block -->
<h2><a href="#install" class="anchor" id="install"><span class="octicon octicon-link"></span></a>Установка</h2>

<h3><a href="#instruction" class="anchor" id="instruction"><span class="octicon octicon-link"></span></a>Инструкция</h3>
<ul>
  <li>Скачайте <a href="//github.com/arcan1s/git-etc/releases" title="GitHub">архив</a> с актуальной версией исходных файлов.</li>
  <li>Извлеките из него файлы и установите приложение:

{% highlight bash %}
./install.sh "/путь/к/корню/"
{% endhighlight %}

Если Вы хотите установить в <code>/</code>, Вы должны запустить это, как root:

{% highlight bash %}
sudo ./install.sh
{% endhighlight %}

Если путь не указан, пакет будет установлен в <code>/</code>.</li>
</ul>

<h3><a href="#dependencies" class="anchor" id="dependencies"><span class="octicon octicon-link"></span></a>Зависимости</h3>
<p>Все было протестировано на последних версиях зависимостей.</p>
<ul>
  <li>Bash (включая awk, grep, sed)</li>
  <li>git</li>
  <li>python2 <i>(make)</i></li>
  <li>systemd <i>(опционально, service-файл)</i></li>
  <li>python2-pyqt4 <i>(опционально, GUI)</i></li>
  <li>xterm <i>(опционально, GUI)</i></li>
</ul>
<!-- end of install block -->

<!-- howto block -->
<h2><a href="#howto" class="anchor" id="howto"><span class="octicon octicon-link"></span></a>Использование</h2>
<p>Если Вы хотите запустить демон в <code>/etc</code>, просто запустите</p>

{% highlight bash %}
systemctl start git-etc
{% endhighlight %}

<p>Если Вы хотите включить автозагрузку демона, запутите</p>

{% highlight bash %}
systemctl enable git-etc
{% endhighlight %}

<p>Но Вы можете изменить путь к конфигурационному файлу или изменить параметры. Для этого, скопируйте (рекомендуется) исходный конфигурационный файл</p>

{% highlight bash %}
cp /etc/git-etc.conf /новый/путь/к/git-etc.conf
{% endhighlight %}

<p>и отредактируйте его. Затем скопируйте исходный service-файл в <code>/etc</code>:</p>

{% highlight bash %}
cp /usr/lib/systemd/system/git-etc.service /etc/systemd/system/git-etc-my-profile.service
{% endhighlight %}

<p>Замените следующую строку в этом файле:</p>

{% highlight bash %}
ExecStart=/usr/bin/git-etc -c /etc/git-etc.conf
{% endhighlight %}

<p>на</p>

{% highlight bash %}
ExecStart=/usr/bin/git-etc -c /новый/путь/к/git-etc.conf
{% endhighlight %}
<!-- end of howto block -->

<!-- config block -->
<h2><a href="#config" class="anchor" id="config"><span class="octicon octicon-link"></span></a>Настройка</h2>
<p>Все настройки хранятся в <code>/etc/git-etc.conf</code>. После редактирования, Вы должны перезапустить демон</p>

{% highlight bash %}
systemctl restart git-etc
{% endhighlight %}

<h3><a href="#options" class="anchor" id="options"><span class="octicon octicon-link"></span></a>Опции</h3>
<table>
  <tr>
    <th>DIRECTORY</th>
    <td>Полный путь к рабочей директории с наблюдаемыми файлами. По умолчанию <code>/etc</code>.</td>
  </tr>
  <tr>
    <th>TIMESLEEP</th>
    <td>Промежуток времени между обновлениями, часы. Должно быть целым и >= 1. По умолчанию <code>12</code>.</td>
  </tr>
  <tr>
    <th>IGNORELIST</th>
    <td>Список файлов, которые не будут наблюдаться. Разделитель ";;". Может быть пустым.</td>
  </tr>
  <tr>
    <th>FORALL</th>
    <td><code>1</code> включит доступ для обычного пользователя. По умолчанию <code>1</code>.</td>
  </tr>
</table>
<!-- end of config block -->

<!-- gui block -->
<h2><a href="#gui" class="anchor" id="gui"><span class="octicon octicon-link"></span></a>Графический интерфейс</h2>
<p>Control Config (<code>ctrlconf</code>) - графический интерфейс для <code>git-etc</code>, написанный на <code>Python2/PyQt4</code>. Данное приложение позволяет Вам увидеть список коммитов и изменения в файлах в данных коммитах. Также данное приложение позволит Вам откатиться на указанный коммит (все файлы, посредством <code>git reset --hard</code>, или только указанный, посредством <code>git diff && git apply</code>). Также Вы можете объединить старый и новый конфигурационные файлы (используются две
ветки репозитория master и experimental). Приложение может потребовать привелегии root, убедитесь, что пакет <code>sudo</code> установлен.</p>

<h3><a href="#gui_configuration" class="anchor" id="gui_configuration"><span class="octicon octicon-link"></span></a>Настройка</h3>
<p>Запустите приложение и откройте окно настроек из меню.</p>

<h3><a href="#screenshots" class="anchor" id="screenshots"><span class="octicon octicon-link"></span></a>Скриншоты</h3>
<div class="thumbnails">
  {% assign scrdesc = "Основное окно" %}
  {% assign scrname = "git-etc_mainwindow" %}
  {% include prj_scr.html %}
  {% assign scrdesc = "Окно 'О программе'" %}
  {% assign scrname = "git-etc_aboutwindow" %}
  {% include prj_scr.html %}
  {% assign scrdesc = "Окно с просмотром изменений при коммите" %}
  {% assign scrname = "git-etc_commitwindow" %}
  {% include prj_scr.html %}
  {% assign scrdesc = "Окно объединения" %}
  {% assign scrname = "git-etc_mergingwindow" %}
  {% include prj_scr.html %}
  {% assign scrdesc = "Окно отката" %}
  {% assign scrname = "git-etc_rollbackwindow" %}
  {% include prj_scr.html %}
</div>
<!-- end of gui block -->
